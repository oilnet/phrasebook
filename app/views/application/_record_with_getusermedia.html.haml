// Local variables:
// form object: f
// phrase or translation object: i

#audio_recorder.getusermedia
  = f.input :recording, as: :hidden, input_html: {class: 'recording_data'}
  = f.label "Tonaufnahme:"
  %ul.button-group
    = button_play_stop_tag(i)
    - if i.recording_data
      // Next line needs some explaining, as it is metaprogrammed:
      // send() calls the method whose name is handed to it as its
      // first argument. Subsequent arguments are handed down to
      // the method called. In this case, the method name resolves
      // to either "translation_path" or "phrase_path".
      %audio{src: send("#{i.class.name.downcase}_path", i, format: :ogg)}
      = button_record_stop_tag(i)
    - else
      %audio{controls: false}
      = button_record_stop_tag(i, overwrite: true)
